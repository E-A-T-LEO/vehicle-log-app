(()=>{var e={};e.id=332,e.ids=[220,332],e.modules={237:(e,t)=>{"use strict";Object.defineProperty(t,"A",{enumerable:!0,get:function(){return a}});var a=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},361:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},909:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{config:()=>g,default:()=>m,getServerSideProps:()=>x,getStaticPaths:()=>b,getStaticProps:()=>h,reportWebVitals:()=>f,routeModule:()=>y,unstable_getServerProps:()=>S,unstable_getServerSideProps:()=>N,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>P,unstable_getStaticProps:()=>j});var r=a(3885),l=a(237),o=a(1413),i=a(9616),n=a.n(i),u=a(5504),c=a.n(u),d=a(8090),p=e([d]);d=(p.then?(await p)():p)[0];let m=(0,o.M)(d,"default"),h=(0,o.M)(d,"getStaticProps"),b=(0,o.M)(d,"getStaticPaths"),x=(0,o.M)(d,"getServerSideProps"),g=(0,o.M)(d,"config"),f=(0,o.M)(d,"reportWebVitals"),j=(0,o.M)(d,"unstable_getStaticProps"),P=(0,o.M)(d,"unstable_getStaticPaths"),v=(0,o.M)(d,"unstable_getStaticParams"),S=(0,o.M)(d,"unstable_getServerProps"),N=(0,o.M)(d,"unstable_getServerSideProps"),y=new r.PagesRouteModule({definition:{kind:l.A.PAGES,page:"/index",pathname:"/",bundlePath:"",filename:""},components:{App:c(),Document:n()},userland:d});s()}catch(e){s(e)}})},1413:(e,t)=>{"use strict";Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},2015:e=>{"use strict";e.exports=require("react")},3873:e=>{"use strict";e.exports=require("path")},4337:e=>{"use strict";e.exports=import("firebase/firestore")},4696:e=>{"use strict";e.exports=require("@react-google-maps/api")},5504:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let s=a(7020),r=a(8732),l=s._(a(2015)),o=a(4718);async function i(e){let{Component:t,ctx:a}=e;return{pageProps:await (0,o.loadGetInitialProps)(t,a)}}class n extends l.default.Component{render(){let{Component:e,pageProps:t}=this.props;return(0,r.jsx)(e,{...t})}}n.origGetInitialProps=i,n.getInitialProps=i,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5751:e=>{"use strict";e.exports=require("xlsx")},6271:e=>{"use strict";e.exports=import("chart.js")},6551:e=>{"use strict";e.exports=import("firebase/app")},6958:e=>{"use strict";e.exports=import("firebase/auth")},8090:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>b});var r=a(8732),l=a(2015),o=a(6551),i=a(6958),n=a(4337),u=a(8700),c=a(9910);a(9712);var d=a(6271),p=a(4696),m=a(5751),h=e([o,i,n,u,c,d]);[o,i,n,u,c,d]=h.then?(await h)():h,d.Chart.register(d.CategoryScale,d.LinearScale,d.BarElement,d.Title,d.Tooltip,d.Legend);let x=(0,o.initializeApp)({apiKey:"AIzaSyB4HL8EUbLrQx4tPehoZ5xDS7nv8jcUlNM",authDomain:"vehicle-log-app-9a199.firebaseapp.com",projectId:"vehicle-log-app-9a199",storageBucket:"vehicle-log-app-9a199.firebasestorage.app",messagingSenderId:"237686694452",appId:"1:237686694452:web:b6df2e8ff915ba1edfe061",measurementId:"G-BT5SPDXG5M"}),g=(0,i.getAuth)(x),f=(0,n.getFirestore)(x),j=new i.GoogleAuthProvider,P={width:"100%",height:"400px"};function b(){let[e,t]=(0,l.useState)(null),[a,s]=(0,l.useState)([]),[o,d]=(0,l.useState)({date:"",from:"",to:"",purpose:"",fuel:"",toll:"",km:""}),[h,b]=(0,l.useState)(new Date),[x,v]=(0,l.useState)([]),S=e=>{d({...o,[e.target.name]:e.target.value})},N=async()=>{if(e&&o.date&&o.from&&o.to){let t={...o,uid:e.uid};await (0,n.addDoc)((0,n.collection)(f,"logs"),t),s([...a,t]),d({date:"",from:"",to:"",purpose:"",fuel:"",toll:"",km:""})}},y=async()=>{await (0,i.signInWithPopup)(g,j)},k=async()=>{await (0,i.signOut)(g)},_=a.reduce((e,t)=>e+Number(t.km||0),0),A=a.reduce((e,t)=>e+Number(t.fuel||0),0),C=a.reduce((e,t)=>e+Number(t.toll||0),0),D=a.reduce((e,t)=>{let a=(t.date||"").slice(0,7);return e[a]||(e[a]={km:0,fuel:0,toll:0}),e[a].km+=Number(t.km||0),e[a].fuel+=Number(t.fuel||0),e[a].toll+=Number(t.toll||0),e},{}),M={labels:Object.keys(D),datasets:[{label:"주행거리 (km)",data:Object.values(D).map(e=>e.km),backgroundColor:"#3B82F6"},{label:"유류비 (원)",data:Object.values(D).map(e=>e.fuel),backgroundColor:"#10B981"},{label:"통행료 (원)",data:Object.values(D).map(e=>e.toll),backgroundColor:"#F59E0B"}]},w=h.toISOString().split("T")[0],E=h.toISOString().slice(0,7),O=a.filter(e=>e.date===w).reduce((e,t)=>e+Number(t.km||0),0);return(0,r.jsxs)("div",{className:"p-4 max-w-5xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h1",{className:"text-xl font-bold",children:"차량 운행일지"}),e?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-sm",children:e.displayName}),(0,r.jsx)("button",{onClick:k,className:"bg-red-500 text-white px-2 py-1 rounded text-sm",children:"로그아웃"})]}):(0,r.jsx)("button",{onClick:y,className:"bg-blue-500 text-white px-3 py-1 rounded",children:"Google 로그인"})]}),e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,r.jsx)("input",{name:"date",placeholder:"날짜 (예: 2025-05-14)",value:o.date,onChange:S,className:"border p-2"}),(0,r.jsx)("input",{name:"from",placeholder:"출발지",value:o.from,onChange:S,className:"border p-2"}),(0,r.jsx)("input",{name:"to",placeholder:"도착지",value:o.to,onChange:S,className:"border p-2"}),(0,r.jsx)("input",{name:"purpose",placeholder:"운행 목적",value:o.purpose,onChange:S,className:"border p-2"}),(0,r.jsx)("input",{name:"fuel",placeholder:"유류비 (원)",value:o.fuel,onChange:S,className:"border p-2"}),(0,r.jsx)("input",{name:"toll",placeholder:"통행료 (원)",value:o.toll,onChange:S,className:"border p-2"}),(0,r.jsx)("input",{name:"km",placeholder:"주행거리 (km)",value:o.km,onChange:S,className:"border p-2"})]}),(0,r.jsx)("button",{onClick:N,className:"bg-green-600 text-white px-4 py-2 rounded",children:"기록 추가"})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("h2",{className:"font-semibold mb-2",children:"\uD83D\uDCCB 운행기록"}),a.map((e,t)=>(0,r.jsxs)("div",{className:"border p-2 text-sm mb-2",children:[e.date," | ",e.from," → ",e.to," | ",e.purpose," | \uD83D\uDE97 ",e.km,"km | ⛽ ",e.fuel,"원 | \uD83D\uDEE3 ",e.toll,"원"]},t)),(0,r.jsxs)("div",{className:"mt-4 text-sm font-semibold",children:["총 주행거리: ",_,"km / 총 유류비: ",A,"원 / 총 통행료: ",C,"원"]})]}),(0,r.jsxs)("div",{className:"mt-10",children:[(0,r.jsx)("h2",{className:"font-semibold mb-2",children:"\uD83D\uDCCA 월별 통계 차트"}),(0,r.jsx)(u.Bar,{data:M,options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"월별 운행 통계"}}}})]}),(0,r.jsxs)("div",{className:"mt-10",children:[(0,r.jsx)("h2",{className:"font-semibold mb-2",children:"\uD83D\uDCC5 일별 주행거리 보기"}),(0,r.jsx)(c.default,{onChange:b,value:h}),(0,r.jsxs)("div",{className:"mt-2 text-sm font-semibold",children:["선택한 날짜: ",w," / 주행거리: ",O,"km"]})]}),(0,r.jsxs)("div",{className:"mt-10",children:[(0,r.jsx)("h2",{className:"font-semibold mb-2",children:"\uD83D\uDDFA️ 이동 경로 보기"}),(0,r.jsx)(p.LoadScript,{googleMapsApiKey:"AIzaSyAyKZUPUo1JQfay_Mm6XQMzpSrglLzA4O4",children:(0,r.jsx)(p.GoogleMap,{mapContainerStyle:P,center:{lat:35.8,lng:128.6},zoom:9,children:(0,r.jsx)(p.Polyline,{path:x,options:{strokeColor:"#3B82F6",strokeOpacity:.8,strokeWeight:4}})})})]}),(0,r.jsx)("div",{className:"mt-10",children:(0,r.jsx)("button",{onClick:()=>{let e=m.utils.book_new(),t=[["날짜","출발지","도착지","운행 목적","유류비","통행료","주행거리"]];a.filter(e=>(e.date||"").startsWith(E)).forEach(e=>{t.push([e.date,e.from,e.to,e.purpose,e.fuel,e.toll,e.km])});let s=m.utils.aoa_to_sheet(t);m.utils.book_append_sheet(e,s,"운행기록"),m.writeFile(e,`vehicle_log_${E}.xlsx`)},className:"bg-yellow-500 text-white px-4 py-2 rounded",children:"\uD83D\uDCE4 엑셀로 내보내기"})})]})}s()}catch(e){s(e)}})},8700:e=>{"use strict";e.exports=import("react-chartjs-2")},8732:e=>{"use strict";e.exports=require("react/jsx-runtime")},9712:()=>{},9910:e=>{"use strict";e.exports=import("react-calendar")}};var t=require("../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[616],()=>a(909));module.exports=s})();